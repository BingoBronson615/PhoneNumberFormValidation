<html>
<body>
    <h1>Format Phone</h1>
    <form>
      <fieldset>
        <div class="required col-md-6 field" id="4939426a-934d-4983-aee5-ac37362d8d33"><fieldset><legend>Are you a US Citizen?</legend><input checked="checked" class="" id="new_areyouauscitizen_true" name="new_areyouauscitizen" onclick="CrmFormControlApplyBooleanFormRules('new_areyouauscitizen_true','70872e54-4023-e011-b4a4-005056a3001c','d8b808e7-2ae3-247a-1c76-3cc4e210c676,345e2ea4-469e-2c07-792d-cb5317a83d00','','','','',false);" type="radio" value="True"><label for="new_areyouauscitizen_true" tabindex="0">Yes</label><input class="" id="new_areyouauscitizen_false" name="new_areyouauscitizen" onclick="CrmFormControlApplyBooleanFormRules('new_areyouauscitizen_false','d8b808e7-2ae3-247a-1c76-3cc4e210c676,345e2ea4-469e-2c07-792d-cb5317a83d00','70872e54-4023-e011-b4a4-005056a3001c','','','','',false);" type="radio" value="False"><label for="new_areyouauscitizen_false" tabindex="0">No</label></fieldset><span class="field-validation-valid" data-valmsg-for="new_areyouauscitizen" data-valmsg-replace="true"></span></div>
        </p>
            <label>Cell Phone</label>
            <input type="text" id="cellphone" value="" />
          </p>
      </fieldset>
    </form>
  </body>
  </html>


  <script>
    // Format the phone number as the user types it
    document.getElementById('cellphone').addEventListener('keyup',function(evt){
            var cellphone = document.getElementById('cellphone');
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            cellphone.value = phoneFormat(cellphone.value);
    });
    
    // We need to manually format the phone number on page load
    document.getElementById('cellphone').value = phoneFormat(document.getElementById('cellphone').value);
    
    // A function to determine if the pressed key is an integer
    function numberPressed(evt){
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            if(charCode > 31 && (charCode < 48 || charCode > 57) && (charCode < 36 || charCode > 40)){
                    return false;
            }
            return true;
    }
    
    // A function to format text to look like a phone number
    function phoneFormat(input){
            // Check if student is US Citizen
            if (document.getElementById('new_areyouauscitizen_true').checked){
            // Strip all characters from the input except digits
            input = input.replace(/\D/g,'');
            
            // Trim the remaining input to ten characters, to preserve phone number format
            input = input.substring(0,10);
    
            // Based upon the length of the string, we add formatting as necessary
            var size = input.length;
            if(size == 0){
                    input = input;
            }else if(size < 4){
                    input = +input;
            }else if(size < 7){
                    input = +input.substring(0,3)+'-'+input.substring(3,6);
            }else{
                    input = +input.substring(0,3)+'-'+input.substring(3,6)+'-'+input.substring(6,10);
            }
            return input; 
    }
    else {return input = input.replace(/\D/g,'');} //return digits only but allow it in any format
    }
    </script>
    
