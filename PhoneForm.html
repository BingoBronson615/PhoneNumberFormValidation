<html>
<body>
    <h1>Format Phone</h1>
    <form>
      <fieldset>
        <div class="required col-md-6 field" id="usnumber">
            <fieldset>
            <legend>Is this a US number?</legend>
                <input checked="checked" class="" id="new_usnumber_true" name="new_usnumber" type="radio" value="True">
                <label for="new_areyouauscitizen_true" tabindex="0">Yes</label>
                <input class="" id="new_usnumber_false" name="new_usnumber" type="radio" value="False">
                <label for="new_usnumber_false" tabindex="0">No</label>
            </fieldset>
        <span class="field-validation-valid" data-valmsg-for="new_usnumber" data-valmsg-replace="true"></span>
        </div>
        </p>
            <label>Cell Phone</label>
            <input type="text" id="cellphone" value="" />
          </p>
      </fieldset>
    </form>
  </body>
  </html>


  <script>
    // Format the phone number as the user types it
    document.getElementById('cellphone').addEventListener('keyup',function(evt){
            var cellphone = document.getElementById('cellphone');
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            cellphone.value = phoneFormat(cellphone.value);
    });
    
    // We need to manually format the phone number on page load
    document.getElementById('cellphone').value = phoneFormat(document.getElementById('cellphone').value);
    
    // A function to determine if the pressed key is an integer
    function numberPressed(evt){
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            if(charCode > 31 && (charCode < 48 || charCode > 57) && (charCode < 36 || charCode > 40)){
                    return false;
            }
            return true;
    }
    
    // A function to format text to look like a phone number
    function phoneFormat(input){
            // Check if the number is in the US
            if (document.getElementById('new_usnumber_true').checked){
            // Strip all characters from the input except digits
            input = input.replace(/\D/g,'');
            
            // Trim remaining input to ten characters, to preserve phone number format
            input = input.substring(0,10);
    
            // Based on the length of the string, add formatting as necessary
            var size = input.length;
            if(size == 0){
                    input = input;
            }else if(size < 4){
                    input = +input;
            }else if(size < 7){
                    input = +input.substring(0,3)+'-'+input.substring(3,6);
            }else{
                    input = +input.substring(0,3)+'-'+input.substring(3,6)+'-'+input.substring(6,10);
            }
            return input; 
    }
    // Return digits only but allow it in any format
    else {return input = input.replace(/\D/g,'');} 
    }
    </script>
    
